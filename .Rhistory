) %>% select(Cod_setor,Cod_municipio ,
Nome_do_municipio,Cod_bairro ,
Nome_do_bairro,Cod_subdistrito ,
Nome_do_subdistrito,x00_04,  x05_09,
x10_14,              x15_19,
x20_24,              x25_29,
x30_34,              x35_39,
x40_44,              x45_49,
x50_54,              x55_59,
x60_64,              x65_69,
x70_74,              x75_79,
x80_84,              x85_mais)
library(readxl)
library(tidyverse)
df.basico <- read_excel("Basico-MG.xls") %>% select("Cod_setor","Cod_municipio","Nome_do_municipio","Cod_bairro","Nome_do_bairro","Cod_subdistrito","Nome_do_subdistrito")
df.pessoa11 <- read_excel("Pessoa11_MG.xls")
df.pessoa12 <- read_excel("Pessoa12_MG.xls")
df.h <- full_join(df.basico,df.pessoa11)
df.m <- full_join(df.basico,df.pessoa12)
rm(df.pessoa11,df.pessoa12,df.basico)
library(tidyselect)
df.h <- df.h %>% mutate(
Cod_setor= as.character(Cod_setor))
df.m <- df.m %>% mutate(
Cod_setor= as.character(Cod_setor))
df.h <- replace(df.h, is.na(df.h), 0)
df.m <- replace(df.m, is.na(df.m), 0)
df.h <- cbind(df.h[,1:8],df.h[,c(9:142)] %>% mutate_if(is.character, as.numeric))
str(df.h$V002)
df.h <- replace(df.h, is.na(df.h), 0)
df.m <- replace(df.m, is.na(df.m), 0)
df.h <- df.h %>% mutate(
x00_04= V022 + V035 + V036 + V037 + V038,
x05_09= V039 + V040 + V041 + V042 + V043,
x10_14= V044 + V045 + V046 + V047 + V048,
x15_19= V049 + V050 + V051 + V052 + V053,
x20_24= V054 + V055 + V056 + V057 + V058,
x25_29= V059 + V060 + V061 + V062 + V063,
x30_34= V064 + V065 + V066 + V067 + V068,
x35_39= V069 + V070 + V071 + V072 + V073,
x40_44= V074 + V075 + V076 + V077 + V078,
x45_49= V079 + V080 + V081 + V082 + V083,
x50_54= V084 + V085 + V086 + V087 + V088,
x55_59= V089 + V090 + V091 + V092 + V093,
x60_64= V094 + V095 + V096 + V097 + V098,
x65_69= V099 + V100 + V101 + V102 + V103,
x70_74= V104 + V105 + V106 + V107 + V108,
x75_79= V109 + V110 + V111 + V112 + V113,
x80_84= V114 + V115 + V116 + V117 + V118,
x85_mais= V119 + V120 + V121 + V122 + V123 +
V124 + V125 + V126 + V127 + V128 +
V129 + V130 + V131 + V132 + V133 + V134
) %>% select(Cod_setor,Cod_municipio ,
Nome_do_municipio,Cod_bairro ,
Nome_do_bairro,Cod_subdistrito ,
Nome_do_subdistrito,x00_04,  x05_09,
x10_14,              x15_19,
x20_24,              x25_29,
x30_34,              x35_39,
x40_44,              x45_49,
x50_54,              x55_59,
x60_64,              x65_69,
x70_74,              x75_79,
x80_84,              x85_mais)
df.m <- df.m %>% mutate(
x00_04= V022 + V035 + V036 + V037 + V038,
x05_09= V039 + V040 + V041 + V042 + V043,
x10_14= V044 + V045 + V046 + V047 + V048,
x15_19= V049 + V050 + V051 + V052 + V053,
x20_24= V054 + V055 + V056 + V057 + V058,
x25_29= V059 + V060 + V061 + V062 + V063,
x30_34= V064 + V065 + V066 + V067 + V068,
x35_39= V069 + V070 + V071 + V072 + V073,
x40_44= V074 + V075 + V076 + V077 + V078,
x45_49= V079 + V080 + V081 + V082 + V083,
x50_54= V084 + V085 + V086 + V087 + V088,
x55_59= V089 + V090 + V091 + V092 + V093,
x60_64= V094 + V095 + V096 + V097 + V098,
x65_69= V099 + V100 + V101 + V102 + V103,
x70_74= V104 + V105 + V106 + V107 + V108,
x75_79= V109 + V110 + V111 + V112 + V113,
x80_84= V114 + V115 + V116 + V117 + V118,
x85_mais= V119 + V120 + V121 + V122 + V123 +
V124 + V125 + V126 + V127 + V128 +
V129 + V130 + V131 + V132 + V133 + V134
) %>% select(Cod_setor,Cod_municipio ,
Nome_do_municipio,Cod_bairro ,
Nome_do_bairro,Cod_subdistrito ,
Nome_do_subdistrito,x00_04,  x05_09,
x10_14,              x15_19,
x20_24,              x25_29,
x30_34,              x35_39,
x40_44,              x45_49,
x50_54,              x55_59,
x60_64,              x65_69,
x70_74,              x75_79,
x80_84,              x85_mais)
library(readxl)
library(tidyverse)
df.basico <- read_excel("Basico-MG.xls") %>% select("Cod_setor","Cod_municipio","Nome_do_municipio","Cod_bairro","Nome_do_bairro","Cod_subdistrito","Nome_do_subdistrito")
df.pessoa11 <- read_excel("Pessoa11_MG.xls")
df.pessoa12 <- read_excel("Pessoa12_MG.xls")
df.h <- full_join(df.basico,df.pessoa11)
df.m <- full_join(df.basico,df.pessoa12)
rm(df.pessoa11,df.pessoa12,df.basico)
library(tidyselect)
df.h <- df.h %>% mutate(
Cod_setor= as.character(Cod_setor))
df.m <- df.m %>% mutate(
Cod_setor= as.character(Cod_setor))
df.h <- cbind(df.h[,1:8],df.h[,c(9:142)] %>% mutate_if(is.character, as.numeric))
df.m <- cbind(df.m[,1:8],df.m[,c(9:142)] %>% mutate_if(is.character, as.numeric))
library(readxl)
library(tidyverse)
df.basico <- read_excel("Basico-MG.xls") %>% select("Cod_setor","Cod_municipio","Nome_do_municipio","Cod_bairro","Nome_do_bairro","Cod_subdistrito","Nome_do_subdistrito")
df.pessoa11 <- read_excel("Pessoa11_MG.xls")
df.pessoa12 <- read_excel("Pessoa12_MG.xls")
df.h <- full_join(df.basico,df.pessoa11)
df.m <- full_join(df.basico,df.pessoa12)
rm(df.pessoa11,df.pessoa12,df.basico)
library(tidyselect)
df.h <- df.h %>% mutate(
Cod_setor= as.character(Cod_setor))
df.m <- df.m %>% mutate(
Cod_setor= as.character(Cod_setor))
df.h <- replace(df.h, is.na(df.h), 0)
df.m <- replace(df.m, is.na(df.m), 0)
df.h <- cbind(df.h[,1:8],df.h[,c(9:142)] %>% mutate_if(is.character, as.numeric))
df.m <- cbind(df.m[,1:8],df.m[,c(9:142)] %>% mutate_if(is.character, as.numeric))
df.h <- replace(df.h, is.na(df.h), 0)
df.m <- replace(df.m, is.na(df.m), 0)
df.h <- df.h %>% mutate(
x00_04= V022 + V035 + V036 + V037 + V038,
x05_09= V039 + V040 + V041 + V042 + V043,
x10_14= V044 + V045 + V046 + V047 + V048,
x15_19= V049 + V050 + V051 + V052 + V053,
x20_24= V054 + V055 + V056 + V057 + V058,
x25_29= V059 + V060 + V061 + V062 + V063,
x30_34= V064 + V065 + V066 + V067 + V068,
x35_39= V069 + V070 + V071 + V072 + V073,
x40_44= V074 + V075 + V076 + V077 + V078,
x45_49= V079 + V080 + V081 + V082 + V083,
x50_54= V084 + V085 + V086 + V087 + V088,
x55_59= V089 + V090 + V091 + V092 + V093,
x60_64= V094 + V095 + V096 + V097 + V098,
x65_69= V099 + V100 + V101 + V102 + V103,
x70_74= V104 + V105 + V106 + V107 + V108,
x75_79= V109 + V110 + V111 + V112 + V113,
x80_84= V114 + V115 + V116 + V117 + V118,
x85_mais= V119 + V120 + V121 + V122 + V123 +
V124 + V125 + V126 + V127 + V128 +
V129 + V130 + V131 + V132 + V133 + V134
) %>% select(Cod_setor,Cod_municipio ,
Nome_do_municipio,Cod_bairro ,
Nome_do_bairro,Cod_subdistrito ,
Nome_do_subdistrito,x00_04,  x05_09,
x10_14,              x15_19,
x20_24,              x25_29,
x30_34,              x35_39,
x40_44,              x45_49,
x50_54,              x55_59,
x60_64,              x65_69,
x70_74,              x75_79,
x80_84,              x85_mais)
df.m <- df.m %>% mutate(
x00_04= V022 + V035 + V036 + V037 + V038,
x05_09= V039 + V040 + V041 + V042 + V043,
x10_14= V044 + V045 + V046 + V047 + V048,
x15_19= V049 + V050 + V051 + V052 + V053,
x20_24= V054 + V055 + V056 + V057 + V058,
x25_29= V059 + V060 + V061 + V062 + V063,
x30_34= V064 + V065 + V066 + V067 + V068,
x35_39= V069 + V070 + V071 + V072 + V073,
x40_44= V074 + V075 + V076 + V077 + V078,
x45_49= V079 + V080 + V081 + V082 + V083,
x50_54= V084 + V085 + V086 + V087 + V088,
x55_59= V089 + V090 + V091 + V092 + V093,
x60_64= V094 + V095 + V096 + V097 + V098,
x65_69= V099 + V100 + V101 + V102 + V103,
x70_74= V104 + V105 + V106 + V107 + V108,
x75_79= V109 + V110 + V111 + V112 + V113,
x80_84= V114 + V115 + V116 + V117 + V118,
x85_mais= V119 + V120 + V121 + V122 + V123 +
V124 + V125 + V126 + V127 + V128 +
V129 + V130 + V131 + V132 + V133 + V134
) %>% select(Cod_setor,Cod_municipio ,
Nome_do_municipio,Cod_bairro ,
Nome_do_bairro,Cod_subdistrito ,
Nome_do_subdistrito,x00_04,  x05_09,
x10_14,              x15_19,
x20_24,              x25_29,
x30_34,              x35_39,
x40_44,              x45_49,
x50_54,              x55_59,
x60_64,              x65_69,
x70_74,              x75_79,
x80_84,              x85_mais)
library(tidyr)
df.h_long <- gather(df.h, faixas, t.pop, x00_04:x85_mais) %>% mutate(Sex = "homem")
df.m_long <- gather(df.m, faixas, t.pop, x00_04:x85_mais) %>% mutate(Sex = "mulher")
df.long <- rbind(df.h_long,df.m_long)
rm(df.h_long,df.m_long)
df.long <- df.long %>%
group_by(Cod_setor, Cod_municipio,
Nome_do_municipio, Cod_bairro,
Nome_do_bairro, Cod_subdistrito,
Nome_do_subdistrito) %>%
mutate(p.pop = t.pop/sum(t.pop)*100)
library(DescTools)
df.piramide <- filter(df.long, Cod_setor==setor_escolhido)
df.piramide %>%  filter(Sex== "homem") %>%  select(p.pop)
subset(df.piramide,df.piramide$Sex=="homem")$p.pop
m.pop<- subset(df.piramide,df.piramide$Sex=="mulher")$p.pop
age <- c("0-4","5-9","10-14","15-19","20-24","25-29",
"30-34","35-39","40-44","45-49","50-54",
"55-59","60-64","65-69","70-74","75-79","80-44","85+")
PlotPyramid(h.pop,
m.pop,
ylab = age, space = 0, col = c("cornflowerblue", "indianred"),
xlim=c(-5,5),
main="Pirâmide etária",
lxlab="Homem", rxlab="Mulher", gapwidth=0, ylab.x=-5 )
h.pop<- subset(df.piramide,df.piramide$Sex=="homem")$p.pop
m.pop<- subset(df.piramide,df.piramide$Sex=="mulher")$p.pop
age <- c("0-4","5-9","10-14","15-19","20-24","25-29",
"30-34","35-39","40-44","45-49","50-54",
"55-59","60-64","65-69","70-74","75-79","80-44","85+")
PlotPyramid(h.pop,
m.pop,
ylab = age, space = 0, col = c("cornflowerblue", "indianred"),
xlim=c(-5,5),
main="Pirâmide etária",
lxlab="Homem", rxlab="Mulher", gapwidth=0, ylab.x=-5 )
PlotPyramid(h.pop,
m.pop,
ylab = age, space = 0, col = c("cornflowerblue", "indianred"),
xlim=c(-6,6),
main="Pirâmide etária",
lxlab="Homem", rxlab="Mulher", gapwidth=0, ylab.x=-5 )
PlotPyramid(h.pop,
m.pop,
ylab = age, space = 0, col = c("cornflowerblue", "indianred"),
xlim=c(-6,6),
main="Pirâmide etária",
lxlab="Homem", rxlab="Mulher", gapwidth=0, ylab.x=-6 )
PlotPyramid(h.pop,
m.pop,
ylab = age, space = 0, col = c("cornflowerblue", "indianred"),
xlim=c(-5,5),
main="Pirâmide etária",
lxlab="Homem", rxlab="Mulher", gapwidth=0, ylab.x=-5 )
df.piramide <- filter(df.long, Cod_bairro==bairro_escolhido)
df.piramide <- filter(df.long, Nome_do_bairro==bairro_escolhido)
View(df.piramide)
df.piramide %>% filter(df.long, Nome_do_bairro==bairro_escolhido)
df.piramide %>% filter(Nome_do_bairro==bairro_escolhido)
View(df.piramide)
df.piramide02 <- df.long %>% filter(Nome_do_bairro==bairro_escolhido)
41-18
57-27
40-17
52-19
245-148
tx.pib <- c(127.8,
111.1,
135.3,
90.9,
173.7,
65.5,
100.0,
130.0,
96.3,
133.3,
77.8,
116.7,
128.6)
tx.pop <- c(1,
1,
0.8,
0.7,
0.7,
0.4,
0.3,
0.3,
0.21,
0.17,
0.13,
-0.3,
-0.4)
cor(tx.pib,tx.pop)
cor.test(tx.pib,tx.pop)
library(microdatasus)
library(microdatasus)
dados_sim <- fetch_datasus(year_start = 2010,
year_end = 2021,
uf = "GO",
information_system = "SIM-DO",
vars=c("DTOBITO","DTNASC","IDADE","SEXO","CODMUNRES"))
dados_sim <- process_sim(dados_sim)
dados_sim<- dados_sim %>% mutate(
obt = 1,
ano = as.numeric(substr(DTOBITO,1,4)),
ano_nasc = as.numeric(substr(DTNASC,1,4)),
IDADEanos = as.numeric(IDADEanos),
faixa_idade =  cut(IDADEanos,c(-Inf,0,4,9,14,19,24,29,34,39,
44,49,54,59,64,69,74,79,84,Inf),
labels = c("_menor que 1 ano",
"01 a 04 anos",
"05 a 09 anos",
"10 a 14 anos",
"15 a 19 anos",
"20 a 24 anos",
"25 a 29 anos",
"30 a 34 anos",
"35 a 39 anos",
"40 a 44 anos",
"45 a 49 anos",
"50 a 54 anos",
"55 a 59 anos",
"60 a 64 anos",
"65 a 69 anos",
"70 a 74 anos",
"75 a 79 anos",
"80 a 84 anos",
"85 anos ou mais")))
library(tidyverse)
dados_sim<- dados_sim %>% mutate(
obt = 1,
ano = as.numeric(substr(DTOBITO,1,4)),
ano_nasc = as.numeric(substr(DTNASC,1,4)),
IDADEanos = as.numeric(IDADEanos),
faixa_idade =  cut(IDADEanos,c(-Inf,0,4,9,14,19,24,29,34,39,
44,49,54,59,64,69,74,79,84,Inf),
labels = c("_menor que 1 ano",
"01 a 04 anos",
"05 a 09 anos",
"10 a 14 anos",
"15 a 19 anos",
"20 a 24 anos",
"25 a 29 anos",
"30 a 34 anos",
"35 a 39 anos",
"40 a 44 anos",
"45 a 49 anos",
"50 a 54 anos",
"55 a 59 anos",
"60 a 64 anos",
"65 a 69 anos",
"70 a 74 anos",
"75 a 79 anos",
"80 a 84 anos",
"85 anos ou mais")))
View(dados_sim)
# total de óbitos para DF
aggregate(data=dados_sim,obt~ano, FUN= sum) # problema identificado com criação de NA em 2000
# tabela 1 - total de obitos e por sexo
tab1 <-dados_sim  %>%
group_by(ano) %>%
summarise(obt = n())
tab1
tab1a<-dados_sim  %>%
filter(SEXO=="Masculino")%>%
group_by(ano) %>%
summarise(obt_masc = n())
tabela1<-merge(tab1,tab1a,by="ano")
rm(tab1,tab1a)
tabela1
tab1b<-dados_sim  %>%
filter(SEXO=="Feminino")%>%
group_by(ano) %>%
summarise(obt_fem = n())
tabela1<-merge(tabela1,tab1b,by="ano")
rm(tab1b)
tabela1
# ajuste com NA
tabela1$obt_masc_ajust<-round(tabela1$obt_masc/(tabela1$obt_masc+tabela1$obt_fem)*tabela1$obt)
tabela1$obt_fem_ajust<-round(tabela1$obt_fem/(tabela1$obt_masc+tabela1$obt_fem)*tabela1$obt)
# verifica se a soma é verdadeira
tabela1$obt_fem_ajust+tabela1$obt_masc_ajust==tabela1$obt
tabela1
# exportando tabelas
library(writexl)
# produzir gráfico
tabela1<-ts(tabela1,start = 2000,frequency = 1)
# produzir gráfico
tabela1<-ts(tabela1,start = 2010,frequency = 1)
library(zoo)
tabela1m<-rollmean(x = tabela1,k = 3)
tabela1m
write_xlsx(as.data.frame(tabela1m),"Tabela  1b - Total de obitos com ma.xlsx")
ggplot(as.data.frame(tabela1m), aes(x=ano, y=obt)) +
geom_line( color="steelblue") +
geom_point() +
xlab("Ano")+
ylab("Óbitos")+
ggtitle("Total de obitos - DF - 2000-2020 ")
# leitura dos pacotes utilizados
library(readxl)
# leitura da base
proj_ibge<- read_excel("indicadores_projecoes_DF_IBGE.xlsx")
# alterações para produzir gráficos
proj_ibge<-ts(proj_ibge,start = 2010,frequency = 1)
proj_ibge<-window(proj_ibge,start = 2010,end=2030,frequency = 1)
# leitura da base
proj_ibge<- read_excel("indicadores_projecoes_DF_IBGE.xlsx")
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
pib_mun <- read_excel("GitHub/mqagp/PIB dos Municípios - base de dados 2010-2020.xls")
setwd("C:/Users/x15767253/Documents/GitHub/mqagp/")
library(readxl)
pib_mun <- read_excel("PIB dos Municípios - base de dados 2010-2020.xls")
colnames(pib_mun)
str(pib_mun)
colnames(pib_mun)
View(pib_mun)
c("ano","cod_gr","nome_gr",
"cod_uf", "sigla_uf","nome_uf",
"cod_mun","nome_mun",
"rm",
"cod_meso","nome_meso",
"cod_micro","nome_micro",
"cod_regim","nome_regim","mun_regim",
"cod_regint","nome_regint","mun_regit",
"cod_conc","nome_conc","tipo_conc",
"cod_arranjo","nome_arranjo",
"hier_urb","hier_urb_prin",
"cod_regiao_rural","nome_regiao_rural","regiao_rural_nucleo","amaz_legal","semiarido","cidade_regiao_sp",
"va_agro","va_ind","va_serv","va_admin","va",
"imp","pib","pib_pc",
"ativ_1","ativ_2","ativ_3"
)
str(pib_mun)
colnames(pib_mun) <- c("ano","cod_gr","nome_gr",
"cod_uf", "sigla_uf","nome_uf",
"cod_mun","nome_mun",
"rm",
"cod_meso","nome_meso",
"cod_micro","nome_micro",
"cod_regim","nome_regim","mun_regim",
"cod_regint","nome_regint","mun_regit",
"cod_conc","nome_conc","tipo_conc",
"cod_arranjo","nome_arranjo",
"hier_urb","hier_urb_prin",
"cod_regiao_rural","nome_regiao_rural","regiao_rural_nucleo","amaz_legal","semiarido","cidade_regiao_sp",
"va_agro","va_ind","va_serv","va_admin","va",
"imp","pib","pib_pc",
"ativ_1","ativ_2","ativ_3"
)
View(pib_mun)
makeDataReport(pib_mun,replace = TRUE)
library(dataMaid)
makeDataReport(pib_mun,replace = TRUE)
colnames(pib_mun)
pib_mun_mg <- pib_mun %>%  filter(cod_uf == 31)
library(tidyverse)
pib_mun_mg <- pib_mun %>%  filter(cod_uf == 31)
9383/853
library(geobr)
install.packages("geobr")
library(geobr)
mun <- read_municipality(code_muni = "MG", year = 2010)
View(mun)
View(mun)
str(pib_mun)
colnames(pib_mun) <- c("ano","cod_gr","nome_gr",
"cod_uf", "sigla_uf","nome_uf",
"code_muni","nome_mun",
"rm",
"cod_meso","nome_meso",
"cod_micro","nome_micro",
"cod_regim","nome_regim","mun_regim",
"cod_regint","nome_regint","mun_regit",
"cod_conc","nome_conc","tipo_conc",
"cod_arranjo","nome_arranjo",
"hier_urb","hier_urb_prin",
"cod_regiao_rural","nome_regiao_rural","regiao_rural_nucleo","amaz_legal","semiarido","cidade_regiao_sp",
"va_agro","va_ind","va_serv","va_admin","va",
"imp","pib","pib_pc",
"ativ_1","ativ_2","ativ_3"
)
str(pib_mun_mg)
library(tidyverse)
pib_mun_mg <- pib_mun %>%  filter(cod_uf == 31)
str(mun)
library(geobr)
mun <- read_municipality(code_muni = "MG", year = 2010)
#Juntar coordenadas para criar o mapa
base_mapa<- left_join(pib_mun_mg, mun , by = 'code_muni')
View(base_mapa)
library(ggplot2)
library(plotly)
install.packages("plotly")
library(ggplot2)
library(plotly)
ggplot_obj <- pib_mun_mg %>%
ggplot() +
geom_sf(data = pib_mun_mg$geom, aes(fill = pib_mun_mg$pib, text = paste("Município: ", pib_mun_mg$nome_mun, "<br>PIB: ", pib_mun_mg$pib))) +   scale_fill_viridis_c(option = 15, begin = 0.2, end = 0.8,                        name = 'PIB') +   theme(panel.grid = element_line(colour = "transparent"),         panel.background = element_blank(),         axis.text = element_blank(),         axis.ticks = element_blank()) +   labs(title = "PIB 2020 dos Municípios de MG",        subtitle = "",        caption = 'Fonte: Elaboração própria', size = 8)
ggplot_obj
pib_mun_mg %>%
ggplot() +
geom_sf(data = geom, aes(fill = pib, text = paste("Município: ", nome_mun, "<br>PIB: ", pib))) +   scale_fill_viridis_c(option = 15, begin = 0.2, end = 0.8,                        name = 'PIB') +   theme(panel.grid = element_line(colour = "transparent"),         panel.background = element_blank(),         axis.text = element_blank(),         axis.ticks = element_blank()) +   labs(title = "PIB 2020 dos Municípios de MG",        subtitle = "",        caption = 'Fonte: Elaboração própria', size = 8)
pib_mun_mg %>%
ggplot() +
geom_sf(data = pib_mun_mg$geom, aes(fill = pib, text = paste("Município: ", nome_mun, "<br>PIB: ", pib))) +   scale_fill_viridis_c(option = 15, begin = 0.2, end = 0.8,                        name = 'PIB') +   theme(panel.grid = element_line(colour = "transparent"),         panel.background = element_blank(),         axis.text = element_blank(),         axis.ticks = element_blank()) +   labs(title = "PIB 2020 dos Municípios de MG",        subtitle = "",        caption = 'Fonte: Elaboração própria', size = 8)
pib_mun_mg %>%
ggplot() +
geom_sf(data = pib_mun_mg$geom, aes(fill = pib, text = paste("Município: ", nome_mun, "<br>PIB: ", pib))) +   scale_fill_viridis_c(option = 15, begin = 0.2, end = 0.8,                        name = 'PIB') +   theme(panel.grid = element_line(colour = "transparent"),         panel.background = element_blank(),         axis.text = element_blank(),         axis.ticks = element_blank()) +   labs(title = "PIB 2020 dos Municípios de MG",        subtitle = "",        caption = 'Fonte: Elaboração própria', size = 8)
ggplot_obj <- base_mapa %>%
ggplot() +
geom_sf(data = base_mapa$geom, aes(fill = pib, text = paste("Município: ", nome_mun, "<br>PIB: ", pib))) +   scale_fill_viridis_c(option = 15, begin = 0.2, end = 0.8,                        name = 'PIB') +   theme(panel.grid = element_line(colour = "transparent"),         panel.background = element_blank(),         axis.text = element_blank(),         axis.ticks = element_blank()) +   labs(title = "PIB 2020 dos Municípios de MG",        subtitle = "",        caption = 'Fonte: Elaboração própria', size = 8)
# Converter o gráfico ggplot para plotly com o hovertext
interactive_plot <- ggplotly(ggplot_obj, tooltip = "text")
